<div id="historyReport">
    <div class="headerAndNav">
        <h2 class="header" i18n>HISTORY TRANSACTION</h2>
        <div class="nav">
            <button class="btnClear btnMargin" (click)="nav('/report/dashboard')" i18n>GENERAL</button>
            <button class="btnClear btnMargin" (click)="nav('/report/customer')" i18n>CUSTOMER</button>
        </div>
    </div>
    <div class="filterHistory">
        <form (ngSubmit)="onSubmit()" #filterHistory="ngForm" fxLayout="row">
            <div fxFlex="28%">
                <strong class="uppercase" i18n>Time Wait</strong><label class="note" i18n>(minute)</label>
                <input class="inputFilter ctrlInput" type="number" i18n-placeholder="min" [(ngModel)]="filter.wtimemin" name="wtimemin" #wtimemin="ngModel" min="0" (ngModelChange)="sync(); onSubmit()">
                <input class="inputFilter ctrlInput" type="number" i18n-placeholder="max" [(ngModel)]="filter.wtimemax" name="wtimemax" #wtimemax="ngModel" min="{{filter.wtimemin}}" (ngModelChange)="onSubmit()">
            </div>
            <div fxFlex="32%">
                <strong class="uppercase" i18n>Time Serve</strong><label class="note">(minute)</label>
                <input class="inputFilter ctrlInput" type="number" i18n-placeholder="min" [(ngModel)]="filter.stimemin" name="stimemin" #stimemin="ngModel" min="0" (ngModelChange)="sync(); onSubmit()">
                <input class="inputFilter ctrlInput" type="number" i18n-placeholder="max" [(ngModel)]="filter.stimemax" name="stimemax" #stimemax="ngModel" min="{{filter.stimemin}}" (ngModelChange)="onSubmit()">
            </div>
            <div fxFlex="40%" class="feedback">
                <strong class="uppercase" i18n>Feedback Customer</strong>
                <select [(ngModel)]="filter.rating" name="rating" #rating="ngModel" (ngModelChange)="onSubmit()">
                    <option value="" i18n>Choose Feedback</option>
                    <option value="veryGood" i18n>Very Good</option>
                    <option value="good" i18n>Good</option>
                    <option value="average" i18n>Average</option>
                    <option value="poor" i18n>Poor</option>
                </select>
            </div>
        </form>
    </div>
    <table class="tableCtrl">
        <thead class="uppercase">
            <th i18n>No.</th>
            <th i18n>Date</th>
            <th i18n>Branch</th>
            <th i18n>Agency</th>
            <th i18n>Service</th>
            <th i18n>Counter</th>
            <th i18n>Teller</th>
            <th i18n>Ticket Number</th>
            <th i18n>Time Printed Ticket</th>
            <th i18n>Time Wait</th>
            <th i18n>Time Serving</th>
            <th i18n>Feedback result</th>
            <th i18n>Detail</th>
        </thead>
        <tbody>
            <tr *ngFor="let d of paging.data$ | async; let i = index">
                <td>{{(i+1)+(paging.Skip)}}</td>
                <td> {{d.cdate}} </td>
                <td> {{d.parent}} </td>
                <td> {{d.branch}} </td>
                <td> {{d.service}} </td>
                <td> {{d.counter}} </td>
                <td> {{d.user}} </td>
                <td> {{d.cnum}} </td>
                <td> {{d.ctime}} </td>
                <td> {{d.wtime}} </td>
                <td> {{d.stime}} </td>
                <td>{{d.rating}}</td>
                <td>
                    <img class="iconDetail" src="./assets/img/icon/play.png" (click)="detail.SetData(d);detail.GetInfoCustomer(d)" alt="Search" style="cursor: pointer">
                </td>
            </tr>
        </tbody>
    </table>

    <transaction #detail></transaction>
    <div class="paginNExport">
        <div class="pagin">
            <button md-button *ngFor="let p of paging.pages$ | async" [class.active]="paging.IsActive(p)" (click)="pagin(p.page)">{{p.title}}</button>
        </div>
        <button class="btnClear export uppercase" (click)="excel()" i18n><i class="fa fa-file-excel-o fa-lg"></i>Export Excel</button>
    </div>
</div>