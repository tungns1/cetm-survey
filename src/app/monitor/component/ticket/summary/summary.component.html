<div id="summaryComponent">
    <h2 class="header uppercase" i18n>Overview</h2>
    <div class="nav">
        <button class="btnFill btnMargin uppercase" appSafeNav="/monitor/ticket" i18n>Transaction</button>
        <button class="btnClear btnMargin uppercase" appSafeNav="/monitor/device" i18n>Device</button>
    </div>

    <!--<table class="tableCtrl">
        <thead class="">
            <th i18n>Store</th>
            <th i18n>Print Ticket</th>
            <th i18n>Waiting Ticket</th>
            <th i18n>Serving Ticket</th>
            <th i18n>Served Ticket</th>
            <th i18n>Cancelled Ticket</th>
            <th i18n>Exceeded Waiting Time Transaction</th>
            <th i18n>Exceeded Serving Time Transaction</th>
        </thead>
        <tbody>
            <tr *ngFor="let s of records$ | async" (click)="focus(s)" class="branchSummary">
                <td> {{s.branch_id | branchName}} </td>
                <td> {{s.printed}}</td>
                <td> {{s.waiting}}</td>
                <td> {{s.serving}}</td>
                <td> {{s.finished}}</td>
                <td> {{s.cancelled}}</td>
                <td [ngClass]="{'warning': s.w_l_percent > waitLongAlertPercent}">
                    <span>{{s.wait_long}} ({{s.w_l_percent}}%)</span>
                </td>
                <td [ngClass]="{'warning': s.s_l_percent > serveLongAlertPercent}">
                    <span>{{s.serve_long}} ({{s.s_l_percent}}%)</span>
                </td>
            </tr>
            <tr *ngIf="total$ | async; let s">
                <td i18n>Summary</td>
                <td> {{s.printed}}</td>
                <td> {{s.waiting}}</td>
                <td> {{s.serving}}</td>
                <td> {{s.finished}}</td>
                <td> {{s.cancelled}}</td>
                <td [ngClass]="{'warning': s.w_l_percent > waitLongAlertPercent}">
                    <span>{{s.wait_long}} ({{s.w_l_percent}}%)</span>
                </td>
                <td [ngClass]="{'warning': s.s_l_percent > serveLongAlertPercent}">
                    <span>{{s.serve_long}} ({{s.s_l_percent}}%)</span>
                </td>
            </tr>
        </tbody>
    </table>-->

    <ag-grid-angular #agGrid style="height: 65vh; background-color: #fff" [gridOptions]="gridOptions" [rowData]="records$ | async" class="ag-fresh tableCtrl"
        enableColResize enableSorting>

        <ag-grid-column headerName="Store" [cellRenderer]="storeCellRenderer" [width]="300" cellClass="padding-10" i18n-headerName></ag-grid-column>

        <ag-grid-column headerName="Print Ticket" field="printed" [width]="100" cellClass="padding-10" i18n-headerName></ag-grid-column>

        <ag-grid-column headerName="Waiting Ticket" field="waiting" [width]="200" cellClass="padding-10" i18n-headerName></ag-grid-column>

        <ag-grid-column headerName="Serving Ticket" field="serving" [width]="200" cellClass="padding-10" i18n-headerName></ag-grid-column>

        <ag-grid-column headerName="Served Ticket" field="finished" [width]="100" cellClass="padding-10" i18n-headerName></ag-grid-column>

        <ag-grid-column headerName="Cancelled Ticket" field="cancelled" [width]="100" cellClass="padding-10" i18n-headerName></ag-grid-column>

        <ag-grid-column headerName="Exceeded Waiting Time Transaction" [cellRenderer]="exceededWaitingCellRenderer" 
            [width]="250" cellClass="padding-10" [cellStyle]="warningExceededWaiting" i18n-headerName></ag-grid-column>

        <ag-grid-column headerName="Exceeded Serving Time Transaction" [cellRenderer]="exceededServingCellRenderer"
            [width]="250" cellClass="padding-10" [cellStyle]="warningExceededServing" i18n-headerName></ag-grid-column>

    </ag-grid-angular>
    <div class="divider margin-20-0"></div>
    <div *ngIf="total$ | async; else loading; let total" class="border">
        <monitor-chart [data]="total"></monitor-chart>
    </div>
    <ng-template #loading>
        <md-spinner></md-spinner>
    </ng-template>
</div>